{% extends 'base.html' %}

{% block content %}
  {% load static %}

  <div class="container">
    <div class="col-md-5 offset-md-3">
      {% if not user.is_authenticated %}
        <style>
          body {
            margin: 0;
            padding: 0;
            background-image: url("{% static '/images/image2.jpg' %}");
            background-size: cover;
            background-position: center;
            height: 100vh;
            overflow: auto;
          }

          .container {
            position: relative;
            z-index: 1;
          }

          .card {
            position: relative;
            z-index: 2;
            margin-top: 5rem;
            font-family: 'Open Sans', sans-serif;
          }
        </style>

        <div class="card mx-auto" style="width: 25rem; background: linear-gradient(to bottom, #a1dbb2, #5a9367);">
          <div class="card-body text-center">
            <h5 class="card-title">Login</h5>
            <br/>
            <form method="POST" action="{% url 'login_user' %}">
              {% csrf_token %}
              <div class="mb-2">
                <label for="InputEmail1" class="form-label">Username</label>
                <input type="email" class="form-control" name="username" placeholder="Enter your email" required>
                <small class="form-text text-muted">We'll never share your email with anyone.</small>
              </div>
              <div class="mb-4">
                <label for="InputPassword1" class="form-label">Password</label>
                <div class="input-group">
                  <input type="password" class="form-control" name="password" id="password" placeholder="Enter your Password" required>
                  <button class="btn btn-success" type="button" onclick="togglePassword('password')">
                    <ion-icon id="eyeIcon" name="eye-off-outline"></ion-icon>
                  </button>
                </div>
              </div>

              <button type="submit" class="btn btn-success">Login</button>
            </form>
          </div>
        </div>
      {% endif %}
    </div>
  </div>

  <script>
    function togglePassword(passwordFieldId) {
      var passwordField = document.getElementById(passwordFieldId);
      var icon = document.getElementById('eyeIcon');
      if (passwordField.type === "password") {
        passwordField.type = "text";
        icon.name = "eye-outline";
      } else {
        passwordField.type = "password";
        icon.name = "eye-off-outline";
      }
    }
  </script>

{% endblock %}
